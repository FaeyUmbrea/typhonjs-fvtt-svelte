function noop(){}function run(t){return t()}function get_store_value(t){let e;return function(t,...e){if(null==t)return noop;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}(t,(t=>e=t))(),e}Promise.resolve();const t=[];function generator(e){function readable(t,e,n){return{subscribe:writable(t,e,n).subscribe}}function writable(n,o,r=noop){e&&(e.getItem(n)&&(o=JSON.parse(e.getItem(n))),e.setItem(n,JSON.stringify(o)));const s=function(e,n=noop){let o;const r=new Set;function set(n){if(i=n,((s=e)!=s?i==i:s!==i||s&&"object"==typeof s||"function"==typeof s)&&(e=n,o)){const n=!t.length;for(const n of r)n[1](),t.push(n,e);if(n){for(let e=0;e<t.length;e+=2)t[e][0](t[e+1]);t.length=0}}var s,i}return{set,update:function(t){set(t(e))},subscribe:function(t,s=noop){const i=[t,s];return r.add(i),1===r.size&&(o=n(set)||noop),t(e),()=>{r.delete(i),0===r.size&&(o(),o=null)}}}}(o,r?function(t){return r((function(o){return e&&e.setItem(n,JSON.stringify(o)),t(o)}))}:void 0);function set(t){e&&e.setItem(n,JSON.stringify(t)),s.set(t)}return{set,update:function(t){set(t(get_store_value(s)))},subscribe:function(t,e=noop){return s.subscribe(t,e)}}}return{readable,writable,derived:function(t,n,o,r){const s=!Array.isArray(n),i=s?[n]:n;return e&&e.getItem(t)&&(r=JSON.parse(e.getItem(t))),readable(t,r,(t=>{let e=0;const n=[];let r=0,u=noop;const sync=()=>{if(r)return;u();const e=s?n[0]:n;if(o.length<2)t(o(e));else{const n=o(e,t);u="function"==typeof n?n:noop}},c=i.map(((t,o)=>t.subscribe((t=>{n[o]=t,r&=~(1<<o),e&&sync()}),(()=>{r|=1<<o}))));return e=1,sync(),function(){c.forEach(run),u()}}))},get:get_store_value}}var e=generator("undefined"!=typeof window?window.localStorage:void 0).writable;class LocalStorage{constructor(){this._stores=new Map}getItem(t,e){return s_GET_STORE$1(this,t,e).get()}getStore(t){return s_GET_STORE$1(this,t)}setItem(t,e){s_GET_STORE$1(this,t).set(e)}swapItemBoolean(t){const e=s_GET_STORE$1(this,t),n=e.get(),o="boolean"==typeof n?!n:0;return e.set(o),o}}function s_GET_STORE$1(t,n,o){let r=t._stores.get(n);return void 0===r&&(r=function(t,n,o){try{localStorage.getItem(n)&&(o=JSON.parse(localStorage.getItem(n)))}catch(t){}const r=e(n,o);return r.get=()=>get_store_value(r),r}(0,o),t._stores.set(n,r)),r}var n=generator("undefined"!=typeof window?window.sessionStorage:void 0).writable;class SessionStorage{constructor(){this._stores=new Map}getItem(t,e){return s_GET_STORE(this,t,e).get()}getStore(t){return s_GET_STORE(this,t)}setItem(t,e){s_GET_STORE(this,t).set(e)}swapItemBoolean(t){const e=s_GET_STORE(this,t),n=e.get(),o="boolean"==typeof n?!n:0;return e.set(o),o}}function s_GET_STORE(t,e,o){let r=t._stores.get(e);return void 0===r&&(r=function(t,e,o){try{sessionStorage.getItem(e)&&(o=JSON.parse(sessionStorage.getItem(e)))}catch(t){}const r=n(e,o);return r.get=()=>get_store_value(r),r}(0,o),t._stores.set(e,r)),r}export{LocalStorage,SessionStorage};
//# sourceMappingURL=store.js.map
