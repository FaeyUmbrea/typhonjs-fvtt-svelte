{"version":3,"file":"component.js","sources":["../../src/modules/component/TJSComponentShell.svelte","../../src/modules/component/TJSContainer.svelte","../../src/modules/component/application/ApplicationShell.svelte","../../src/modules/component/application/TJSApplicationHeader.svelte","../../src/modules/component/application/TJSApplicationShell.svelte","../../src/modules/component/application/TJSHeaderButton.svelte","../../src/modules/component/contextmenu/TJSContextMenu.svelte"],"sourcesContent":["<script>\r\n   import { getContext }    from 'svelte';\r\n\r\n   import TJSContainer      from '@typhonjs-fvtt/svelte/component';\r\n\r\n   const context = getContext('external');\r\n   const children = typeof context === 'object' ? context.children : void 0;\r\n</script>\r\n<TJSContainer {children} warn={true} />","<script>\r\n   export let warn = false;\r\n   export let children = void 0;\r\n</script>\r\n\r\n<svelte:options accessors={true}/>\r\n\r\n{#if Array.isArray(children)}\r\n    {#each children as child}\r\n        <svelte:component this={child.class} {...child.props} />\r\n    {/each}\r\n{:else if warn}\r\n    <p>Container warning: No children.</p>\r\n{/if}\r\n\r\n<style>\r\n    p {\r\n        color: red;\r\n        font-size: 18px;\r\n    }\r\n</style>","<script>\r\n   import { getContext }            from 'svelte';\r\n\r\n   import { TJSApplicationHeader }  from '@typhonjs-fvtt/svelte/component';\r\n   import { TJSContainer }          from '@typhonjs-fvtt/svelte/component';\r\n\r\n   export let title = void 0;\r\n   export let zIndex = void 0\r\n\r\n   let appTitle;\r\n   let content, root;\r\n\r\n   const context = getContext('external');\r\n\r\n   const foundryApp = context.foundryApp;\r\n   const children = typeof context === 'object' ? context.children : void 0;\r\n\r\n   $: appTitle = typeof title === 'string' ? title : foundryApp.title;\r\n</script>\r\n\r\n<svelte:options accessors={true}/>\r\n\r\n<div id={foundryApp.id}\r\n     class=\"app window-app {foundryApp.options.classes.join(' ')}\"\r\n     data-appid={foundryApp.appId}\r\n     style=\"{Number.isInteger(zIndex) ? `z-index: ${zIndex}` : ''}\"\r\n     bind:this={root}>\r\n    <TJSApplicationHeader title = {appTitle} headerButtons= {foundryApp._getHeaderButtons()} />\r\n    <section class=window-content bind:this={content}>\r\n        {#if Array.isArray(children)}\r\n            <TJSContainer {children} />\r\n        {:else}\r\n            <slot />\r\n        {/if}\r\n    </section>\r\n</div>","<script>\r\n   import { TJSHeaderButton }   from '@typhonjs-fvtt/svelte/component';\r\n\r\n   export let title = '';\r\n   export let headerButtons = [];\r\n</script>\r\n\r\n<svelte:options accessors={true}/>\r\n\r\n<header class=\"window-header flexrow\">\r\n    <h4 class=window-title>{title}</h4>\r\n    {#each headerButtons as button}\r\n        <TJSHeaderButton {button}/>\r\n    {/each}\r\n</header>","<script>\r\n   import { getContext, setContext }   from 'svelte';\r\n\r\n   import { TJSApplicationHeader }     from '@typhonjs-fvtt/svelte/component';\r\n   import { TJSContainer }             from '@typhonjs-fvtt/svelte/component';\r\n\r\n   export let title = void 0;\r\n   export let zIndex = void 0\r\n\r\n   let appTitle;\r\n   let content, root;\r\n\r\n   setContext('getElementContent', () => content);\r\n   setContext('getElementRoot', () => root);\r\n\r\n   const context = getContext('external');\r\n\r\n   const foundryApp = context.foundryApp;\r\n   const children = typeof context === 'object' ? context.children : void 0;\r\n\r\n   $: appTitle = typeof title === 'string' ? title : foundryApp.title;\r\n</script>\r\n\r\n<svelte:options accessors={true}/>\r\n\r\n<div id={foundryApp.id}\r\n     class=\"typhonjs-app typhonjs-window-app {foundryApp.options.classes.join(' ')}\"\r\n     data-appid={foundryApp.appId}\r\n     style=\"{Number.isInteger(zIndex) ? `z-index: ${zIndex}` : ''}\"\r\n     bind:this={root}>\r\n    <TJSApplicationHeader title={appTitle} headerButtons={foundryApp._getHeaderButtons()} />\r\n    <section class=window-content bind:this={content}>\r\n        {#if Array.isArray(children)}\r\n            <TJSContainer {children} />\r\n        {:else}\r\n            <slot />\r\n        {/if}\r\n    </section>\r\n</div>\r\n\r\n<style>\r\n  /* Defines the styles for that mimics a popout Application. `:global` is used to preserve the unused CSS */\r\n  :global(.typhonjs-app) {\r\n    max-height: 100%;\r\n    background: url(/ui/denim075.png) repeat;\r\n    border-radius: 5px;\r\n    box-shadow: 0 0 20px #000;\r\n    margin: 3px 0;\r\n    color: #f0f0e0;\r\n    position: absolute;\r\n  }\r\n\r\n  :global(.typhonjs-window-app) {\r\n    display: flex;\r\n    flex-direction: column;\r\n    flex-wrap: nowrap;\r\n    justify-content: flex-start;\r\n    padding: 0;\r\n    z-index: 99;\r\n  }\r\n\r\n  :global(.typhonjs-window-app .window-content) {\r\n    display: flex;\r\n    flex-direction: column;\r\n    flex-wrap: nowrap;\r\n    justify-content: flex-start;\r\n    padding: 8px;\r\n    color: #191813;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n  }\r\n\r\n  :global(.typhonjs-window-app .window-header) {\r\n    flex: 0 0 30px;\r\n    overflow: hidden;\r\n    padding: 0 8px;\r\n    line-height: 30px;\r\n    border-bottom: 1px solid #000;\r\n    pointer-events: auto;\r\n  }\r\n\r\n  :global(.typhonjs-window-app .window-header a) {\r\n    flex: none;\r\n    margin: 0 0 0 8px;\r\n  }\r\n\r\n  :global(.typhonjs-window-app .window-header h4) {\r\n    font-family: Signika, sans-serif;\r\n  }\r\n\r\n  :global(.typhonjs-window-app .window-header i[class^=fa]) {\r\n    margin-right: 3px;\r\n  }\r\n\r\n  :global(.typhonjs-window-app .window-header .window-title) {\r\n    margin: 0;\r\n    word-break: break-all;\r\n  }\r\n\r\n  :global(.typhonjs-window-app .window-resizable-handle) {\r\n    width: 20px;\r\n    height: 20px;\r\n    position: absolute;\r\n    bottom: -1px;\r\n    right: 0;\r\n    background: #444;\r\n    padding: 2px;\r\n    border: 1px solid #111;\r\n    border-radius: 4px 0 0 0;\r\n  }\r\n\r\n  :global(.typhonjs-window-app .window-resizable-handle i.fas) {\r\n    transform: rotate(45deg);\r\n  }\r\n\r\n  :global(.typhonjs-window-app.minimized .window-header) {\r\n    border: 1px solid #000;\r\n  }\r\n\r\n  :global(.typhonjs-window-app.minimized .window-resizable-handle) {\r\n    display: none;\r\n  }\r\n</style>","<script>\r\n   /**\r\n    * Provides an app header button conforming to the Foundry {@link ApplicationHeaderButton} type. Additionally a\r\n    * `title` field is supported to give a tool tip for the button. The `onclick` function if defined is invoked when\r\n    * the button is clicked and state is updated accordingly.\r\n    */\r\n   import { localize }  from '@typhonjs-fvtt/svelte/helper';\r\n\r\n   export let button;\r\n\r\n   function onClick()\r\n   {\r\n      if (typeof button.onclick === 'function')\r\n      {\r\n         button.onclick.call(button);\r\n         button = button;\r\n      }\r\n   }\r\n</script>\r\n\r\n<svelte:options accessors={true}/>\r\n\r\n<a on:click={onClick} class=header-button>\r\n    <i class={button.icon} title={localize(button.title)}></i>{localize(button.label)}\r\n</a>\r\n","<script>\r\n   import { createEventDispatcher } from 'svelte';\r\n   import { current_component }     from 'svelte/internal';\r\n\r\n   import { localize }              from '@typhonjs-fvtt/svelte/helper';\r\n   import { slideFade }             from '@typhonjs-fvtt/svelte/transition';\r\n   import { outroAndDestroy }       from '@typhonjs-fvtt/svelte/util';\r\n\r\n   export let id = '';\r\n   export let x = 0;\r\n   export let y = 0;\r\n   export let items = [];\r\n   export let zIndex = 10000;\r\n   export let transitionOptions = void 0;\r\n\r\n   // Bound to the nav element / menu.\r\n   let menuEl;\r\n\r\n   // Store this component reference.\r\n   const local = current_component;\r\n\r\n   // Dispatches `close` event.\r\n   const dispatch = createEventDispatcher();\r\n\r\n   // Stores if this context menu is closed.\r\n   let closed = false;\r\n\r\n   /**\r\n    * Provides a custom animate callback allowing inspection of the element to change positioning styles based on the\r\n    * height / width of the element and `document.body`. This allows the context menu to expand up when the menu\r\n    * is outside the height bound of `document.body` and expand to the left if width is greater than `document.body`.\r\n    *\r\n    * @param {HTMLElement} node - nav element.\r\n    *\r\n    * @returns {object} Transition object.\r\n    */\r\n   function animate(node)\r\n   {\r\n      const expandUp = y + node.clientHeight > document.body.clientHeight\r\n      const expandLeft = x + node.clientWidth > document.body.clientWidth\r\n\r\n      node.style.top = expandUp ? null : `${y}px`;\r\n      node.style.bottom = expandUp ? `${document.body.clientHeight - y}px` : null;\r\n\r\n      node.style.left = expandLeft ? null : `${x}px`;\r\n      node.style.right = expandLeft ? `${document.body.clientWidth - x}px` : null;\r\n\r\n      return slideFade(node, transitionOptions);\r\n   }\r\n\r\n   /**\r\n    * Invokes a function on click of a menu item then fires the `close` event and automatically runs the outro\r\n    * transition and destroys the component.\r\n    *\r\n    * @param {function} callback - Function to invoke on click.\r\n    */\r\n   function onClick(callback)\r\n   {\r\n      if (typeof callback === 'function') { callback(); }\r\n\r\n      if (!closed)\r\n      {\r\n         dispatch('close');\r\n         closed = true;\r\n         outroAndDestroy(local);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Determines if a pointer pressed to the document body closes the context menu. If the click occurs outside the\r\n    * context menu then fire the `close` event and run the outro transition then destroy the component.\r\n    *\r\n    * @param {PointerEvent}   event - Pointer event from document body click.\r\n    */\r\n   async function onClose(event)\r\n   {\r\n      // Early out if the pointer down is inside the menu element.\r\n      if (event.target === menuEl || menuEl.contains(event.target)) { return; }\r\n\r\n      // Early out if the event page X / Y is the same as this context menu.\r\n      if (Math.floor(event.pageX) === x && Math.floor(event.pageY) === y) { return; }\r\n\r\n      if (!closed)\r\n      {\r\n         dispatch('close');\r\n         closed = true;\r\n         outroAndDestroy(local);\r\n      }\r\n   }\r\n</script>\r\n<!-- bind to `document.body` to receive pointer down events to close the context menu. -->\r\n<svelte:body on:pointerdown={onClose}/>\r\n\r\n<nav id={id} class=tjs-context-menu transition:animate bind:this={menuEl} style=\"z-index: {zIndex}\">\r\n    <ol class=tjs-context-items>\r\n        {#each items as item}\r\n            <li class=tjs-context-item on:click={() => onClick(item.onclick)}><i class={item.icon}></i>{localize(item.label)}</li>\r\n        {/each}\r\n    </ol>\r\n</nav>\r\n\r\n<style>\r\n    .tjs-context-menu {\r\n        position: fixed;\r\n        width: fit-content;\r\n        font-size: 14px;\r\n        box-shadow: 0 0 10px #000;\r\n        height: max-content;\r\n        min-width: 150px;\r\n        max-width: 360px;\r\n        background: #23221d;\r\n        border: 1px solid #000;\r\n        border-radius: 5px;\r\n        color: #EEE;\r\n    }\r\n\r\n    .tjs-context-menu ol.tjs-context-items {\r\n        list-style: none;\r\n        margin: 0;\r\n        padding: 0;\r\n    }\r\n\r\n    .tjs-context-menu li.tjs-context-item {\r\n        padding: 0 5px;\r\n        line-height: 32px;\r\n    }\r\n\r\n    .tjs-context-menu li.tjs-context-item:hover {\r\n        color: #FFF;\r\n        text-shadow: 0 0 4px red;\r\n    }\r\n\r\n    .tjs-context-menu li.tjs-context-item > i {\r\n        margin-right: 5px;\r\n    }\r\n</style>"],"names":[],"mappings":"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"}